# üìä Sales Analytics Project
Python –ø—Ä–æ–µ–∫—Ç –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø—Ä–æ–¥–∞–∂ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º PostgreSQL, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π –∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π.

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Backend**: Python 3.8+, psycopg2
- **Database**: PostgreSQL, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è, –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
- **Data Generation**: Faker
- **Containerization**: Docker, Docker Compose
- **Database GUI**: DBeaver
- **Testing**: Custom test framework with assertions

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- üêç Python 3.8+
- üê≥ Docker –∏ Docker Compose
- üîß Git

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
git clone <your-repo>
cd postgre-sales-analytics

# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python3 -m venv venv
source venv/bin/activate  # Linux/MacOS

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env 

# üóÑÔ∏è –ó–∞–ø—É—Å–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose up -d

# üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
python main.py
```

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã:

### üìä –¢–∞–±–ª–∏—Ü—ã

- **üë• users** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (100 —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π)
- **üì¶ products** - –¢–æ–≤–∞—Ä—ã (50 —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π)
- **üõí orders** - –ó–∞–∫–∞–∑—ã (200 —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π)
- **üìã order_items** - –≠–ª–µ–º–µ–Ω—Ç—ã –∑–∞–∫–∞–∑–æ–≤

### üîç –ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
- **üìà weekly_sales_report** - –ù–µ–¥–µ–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- **üìä monthly_sales_summary** - –ú–µ—Å—è—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂

### üëÅÔ∏è –û–±—ã—á–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
- **üìä daily_sales** - –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏
- **üè∑Ô∏è category_analysis** - –ê–Ω–∞–ª–∏–∑ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- **üë§ customer_analytics** - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∫–ª–∏–µ–Ω—Ç–∞–º
- **üìã order_details** - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–∞—Ö

### ‚ö° –ò–Ω–¥–µ–∫—Å—ã
- `idx_orders_date` - –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ –ø–æ –¥–∞—Ç–∞–º
- `idx_orders_user_id` - –¥–ª—è –ø–æ–∏—Å–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `idx_orders_status` - –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Å—Ç–∞—Ç—É—Å—É
- `idx_order_items_order_id` - –¥–ª—è –ø–æ–∏—Å–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∑–∞–∫–∞–∑–∞
- `idx_order_items_product_id` - –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–¥–∞–∂ —Ç–æ–≤–∞—Ä–æ–≤
- `idx_products_category` - –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- `idx_weekly_sales_week` - –¥–ª—è –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è weekly_sales_report
- `idx_monthly_sales_month` - –¥–ª—è –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è monthly_sales_summary
- `idx_weekly_sales_revenue` - –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –≤—ã—Ä—É—á–∫–µ
- `idx_monthly_sales_revenue` - –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –≤—ã—Ä—É—á–∫–µ

### üîó –í–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏
- **`orders.user_id`** ‚Üí `users.id` (—Å–≤—è–∑—å –∑–∞–∫–∞–∑–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
- **`order_items.order_id`** ‚Üí `orders.id` (—Å–≤—è–∑—å —ç–ª–µ–º–µ–Ω—Ç–∞ –∑–∞–∫–∞–∑–∞ —Å –∑–∞–∫–∞–∑–æ–º, `ON DELETE CASCADE`)
- **`order_items.product_id`** ‚Üí `products.id` (—Å–≤—è–∑—å —ç–ª–µ–º–µ–Ω—Ç–∞ –∑–∞–∫–∞–∑–∞ —Å —Ç–æ–≤–∞—Ä–æ–º)

### üîÑ –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è–º–∏

| –¢–∏–ø | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|-----|----------|------------|-------------------|---------------|
| **–ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ** | `weekly_sales_report` | –í—Ä—É—á–Ω—É—é (`REFRESH`) | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –°–ª–æ–∂–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, –Ω–µ–¥–µ–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º |
| **–ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ** | `monthly_sales_summary` | –í—Ä—É—á–Ω—É—é (`REFRESH`) | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –ú–µ—Å—è—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂ |
| **–û–±—ã—á–Ω–æ–µ** | `daily_sales` | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ | ‚≠ê‚≠ê‚≠ê | –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ |
| **–û–±—ã—á–Ω–æ–µ** | `category_analysis` | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ | ‚≠ê‚≠ê‚≠ê | –ê–Ω–∞–ª–∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø—Ä–æ–¥—É–∫—Ç–æ–≤ |
| **–û–±—ã—á–Ω–æ–µ** | `customer_analytics` | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ | ‚≠ê‚≠ê‚≠ê | –ê–Ω–∞–ª–∏–∑ –∫–ª–∏–µ–Ω—Ç–æ–≤ |
| **–û–±—ã—á–Ω–æ–µ** | `order_details` | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ | ‚≠ê‚≠ê | –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–æ–≤ |

## üìà –ü—Ä–∏–º–µ—Ä—ã –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å SQL –∑–∞–ø—Ä–æ—Å—ã:

```sql
-- –ù–µ–¥–µ–ª—å–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏ –∏–∑ –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
SELECT * FROM weekly_sales_report ORDER BY week_start DESC;

-- –ú–µ—Å—è—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
SELECT * FROM monthly_sales_summary ORDER BY month_start DESC;

-- –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é
SELECT * FROM daily_sales WHERE sale_date >= CURRENT_DATE - INTERVAL '7 days';

-- –ê–Ω–∞–ª–∏–∑ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –ø—Ä–æ–¥—É–∫—Ç–æ–≤
SELECT * FROM category_analysis ORDER BY total_revenue DESC;

-- –¢–æ–ø-10 –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ —Å—É–º–º–µ –ø–æ–∫—É–ø–æ–∫
SELECT * FROM customer_analytics ORDER BY total_spent DESC LIMIT 10;

-- –î–µ—Ç–∞–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–∫–∞–∑–æ–≤
SELECT * FROM order_details WHERE order_status = 'completed' LIMIT 5;

-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π
REFRESH MATERIALIZED VIEW CONCURRENTLY weekly_sales_report;
REFRESH MATERIALIZED VIEW CONCURRENTLY monthly_sales_summary;
```

## üõ†Ô∏è –†–∞–±–æ—Ç–∞ —Å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è–º–∏

```bash
### –°–æ–∑–¥–∞—Ç—å –≤—Å–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
python -c "from scripts.create_views import create_analytical_views; create_analytical_views()"

### –û–±–Ω–æ–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
python -c "from scripts.create_views import refresh_materialized_views; refresh_materialized_views()"

### –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è—Ö
python -c "from scripts.create_views import show_view_info; show_view_info()"

### –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (–¥–ª—è –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è)
python -c "from scripts.create_views import drop_all_views; drop_all_views()"
```

## üõ†Ô∏è –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```bash
### –¢–æ–ª—å–∫–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
python -c "from database.init_database import init_database; init_database()"

### –¢–æ–ª—å–∫–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
python -c "from scripts.generate_data import generate_sample_data; generate_sample_data()"

### –¢–æ–ª—å–∫–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤
python -c "from reports.weekly_sales_report import show_comprehensive_report; show_comprehensive_report()"
```

## ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∑–∞–¥–∞–Ω–∏—é

- [x] –°–æ–∑–¥–∞–Ω–∞ —Å—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–æ–¥–∞–∂ (4 —Ç–∞–±–ª–∏—Ü—ã)

- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã SQL-—Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–π (4 –æ–±—ã—á–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è + 2 –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö)

- [x] –°–æ–∑–¥–∞–Ω–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å –æ—Ç—á–µ—Ç–æ–º –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º –∑–∞ –Ω–µ–¥–µ–ª—é –∏ –º–µ—Å—è—Ü


## üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
python tests/run_tests.py

###  –ó–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
python tests/test_relationships.py
python tests/test_data_types.py
python tests/test_reports_correctness.py
```
